function getCoords(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset}}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function nextSlide(){for(var e=0;e<slides.length&&!slides[e].checked;e++);e+=1,e>=slides.length&&(e=0),slides[e].checked=!0}var rangeFilter=document.querySelector(".range-filter");if(rangeFilter){var scale=rangeFilter.querySelector(".scale"),bar=scale.querySelector(".bar"),toggleMin=rangeFilter.querySelector(".toggle-min"),toggleMax=rangeFilter.querySelector(".toggle-max"),toggleMinMarker=toggleMin.querySelector("div"),toggleMaxMarker=toggleMax.querySelector("div"),toggleMinText=toggleMin.querySelector("span"),toggleMaxText=toggleMax.querySelector("span"),inputMinPrice=rangeFilter.querySelector("[name=min-price]"),inputMaxPrice=rangeFilter.querySelector("[name=max-price]"),minPrice=0,maxPrice=9e3,MAX_PRICE=9e3;toggleMinMarker.addEventListener("mousedown",function(e){e.preventDefault();var t=getCoords(toggleMinMarker),r=e.pageX-t.left,a=getCoords(scale),o=function(e){e.preventDefault();var t=scale.offsetWidth-toggleMax.offsetWidth,o=e.pageX-r-a.left,i=0;o<i&&(o=i),rightEdge=t*maxPrice/MAX_PRICE-toggleMin.offsetWidth,o>rightEdge&&(o=rightEdge),minPrice=Math.round(o/t*MAX_PRICE),toggleMin.style.left=o+"px",bar.style.left=o+"px",bar.style.width=scale.offsetWidth*(maxPrice-minPrice)/MAX_PRICE+"px",toggleMinText.textContent="от "+minPrice,inputMinPrice.value=minPrice;var s=1-(maxPrice-minPrice)/MAX_PRICE*t/t;s*=.85,toggleMinText.style.marginLeft=0-toggleMinText.offsetWidth*s+"px",toggleMaxText.style.marginLeft=toggleMaxText.offsetWidth*s-35+"px"};document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",function(e){e.preventDefault(),document.removeEventListener("mousemove",o,!1)})}),toggleMaxMarker.addEventListener("mousedown",function(e){e.preventDefault();var t=getCoords(toggleMaxMarker),r=e.pageX-t.left,a=getCoords(scale),o=function(e){e.preventDefault();var t=scale.offsetWidth-toggleMax.offsetWidth,o=e.pageX-r-a.left,i=Math.round(t*minPrice/MAX_PRICE)+toggleMin.offsetWidth;o<i&&(o=i);var s=t;o>s&&(o=s),maxPrice=Math.round(o/t*MAX_PRICE),toggleMax.style.left=o+"px",bar.style.width=scale.offsetWidth*(maxPrice-minPrice)/MAX_PRICE+"px",toggleMaxText.textContent="от "+maxPrice,inputMaxPrice.value=maxPrice;var l=1-(maxPrice-minPrice)/MAX_PRICE*t/t;l*=.85,toggleMinText.style.marginLeft=0-toggleMinText.offsetWidth*l+"px",toggleMaxText.style.marginLeft=toggleMaxText.offsetWidth*l-35+"px"};document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",function(e){e.preventDefault(),document.removeEventListener("mousemove",o,!1)})})}var mapPopup=document.querySelector(".modal-map");if(mapPopup){var mapLink=document.querySelector(".contact-button-map"),mapClose=mapPopup.querySelector(".modal-close");mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show"),overlay.classList.add("modal-overlay-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show"),overlay.classList.remove("modal-overlay-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mapPopup.classList.contains("modal-show")&&(mapPopup.classList.remove("modal-show"),overlay.classList.remove("modal-overlay-show")))});var overlay=document.querySelector(".modal-overlay");overlay.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.contains("modal-show")&&(mapPopup.classList.remove("modal-show"),overlay.classList.remove("modal-overlay-show"))})}var writeusPopup=document.querySelector(".modal-writeus");if(writeusPopup){var writeusClose=writeusPopup.querySelector(".modal-close"),writeusForm=writeusPopup.querySelector("form"),writeusName=writeusForm.querySelector("[name=name]"),writeusEmail=writeusForm.querySelector("[name=email]"),writeusText=writeusForm.querySelector("[name=text]"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("writeusName")}catch(e){isStorageSupport=!1}var writeusLink=document.querySelector(".button-writeus");writeusLink&&writeusLink.addEventListener("click",function(e){e.preventDefault(),writeusPopup.classList.add("modal-show"),overlay.classList.add("modal-overlay-show"),writeusName.focus();var t=localStorage.getItem("writeusName"),r=localStorage.getItem("writeusEmail");t?writeusName.value=t:writeusName.focus(),r?(writeusEmail.value=r,writeusText.focus()):writeusEmail.focus(),t||writeusName.focus()}),writeusClose.addEventListener("click",function(e){e.preventDefault(),writeusPopup.classList.remove("modal-show"),writeusPopup.classList.remove("modal-error"),overlay.classList.remove("modal-overlay-show")}),writeusForm.addEventListener("submit",function(e){writeusText.value?writeusText.classList.remove("form-invalid"):(writeusText.classList.add("form-invalid"),writeusText.focus());var t=writeusEmail.value&&validateEmail(writeusEmail.value);t?writeusEmail.classList.remove("form-invalid"):(writeusEmail.classList.add("form-invalid"),writeusEmail.focus()),writeusName.value?writeusName.classList.remove("form-invalid"):(writeusName.classList.add("form-invalid"),writeusName.focus()),writeusName.value&&t&&writeusText.value?isStorageSupport&&(localStorage.setItem("writeusName",writeusName.value),localStorage.setItem("writeusEmail",writeusEmail.value)):(e.preventDefault(),writeusPopup.classList.remove("modal-error"),writeusPopup.offsetWidth=writeusPopup.offsetWidth,writeusPopup.classList.add("modal-error"))}),writeusName.addEventListener("change",function(e){writeusName.classList.remove("form-invalid")}),writeusText.addEventListener("change",function(e){writeusText.classList.remove("form-invalid")}),writeusEmail.addEventListener("change",function(e){writeusEmail.classList.remove("form-invalid")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),writeusPopup.classList.contains("modal-show")&&(writeusPopup.classList.remove("modal-show"),writeusPopup.classList.remove("modal-error"),overlay.classList.remove("modal-overlay-show")))});var overlay=document.querySelector(".modal-overlay");overlay.addEventListener("click",function(e){e.preventDefault(),writeusPopup.classList.contains("modal-show")&&(writeusPopup.classList.remove("modal-show"),writeusPopup.classList.remove("modal-error"),overlay.classList.remove("modal-overlay-show"))})}var slider=document.querySelector(".slider");if(slider)for(var slides=slider.querySelectorAll("[name=toggle]"),sliderInterval=setInterval(nextSlide,5e3),i=0;i<slides.length;i++)slides[i].addEventListener("click",function(e){clearInterval(sliderInterval)});